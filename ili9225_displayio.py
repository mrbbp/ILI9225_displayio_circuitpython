import displayio

_INIT_SEQUENCE = bytes([
    0x10, 0x02, 0x00, 0x00,
    0x11, 0x02, 0x00, 0x00,
    0xFF, 0x80, 0x28,       # Delay 40ms
    0x11, 0x02, 0x00, 0x18,
    0x12, 0x02, 0x61, 0x21,
    0x13, 0x02, 0x00, 0x6F,
    0x14, 0x02, 0x49, 0x5F,
    0x10, 0x02, 0x08, 0x00,
    0xFF, 0x80, 0x0A,       # Delay 10ms
    0x11, 0x02, 0x10, 0x3B,
    0xFF, 0x80, 0x32,       # Delay 50ms
    0x01, 0x02, 0x01, 0x1C,
    0x02, 0x02, 0x01, 0x00,
    0x03, 0x02, 0x10, 0x30,
    0x07, 0x02, 0x00, 0x00,
    0x08, 0x02, 0x08, 0x08,
    0x0B, 0x02, 0x11, 0x00,
    0x0C, 0x02, 0x00, 0x00,
    0x0F, 0x02, 0x0D, 0x01,
    0x15, 0x02, 0x00, 0x20,
    0x20, 0x02, 0x00, 0x00,
    0x21, 0x02, 0x00, 0x00,
    0x36, 0x02, 0x00, 0xAF,
    0x37, 0x02, 0x00, 0x00,
    0x38, 0x02, 0x00, 0xDB,
    0x39, 0x02, 0x00, 0x00,
    0x50, 0x02, 0x00, 0x00,
    0x51, 0x02, 0x08, 0x08,
    0x52, 0x02, 0x08, 0x0A,
    0x53, 0x02, 0x00, 0x0A,
    0x54, 0x02, 0x0A, 0x08,
    0x55, 0x02, 0x08, 0x08,
    0x56, 0x02, 0x00, 0x00,
    0x57, 0x02, 0x0A, 0x00,
    0x58, 0x02, 0x07, 0x10,
    0x59, 0x02, 0x07, 0x10,
    0x07, 0x02, 0x00, 0x12,
    0xFF, 0x80, 0x32,       # Delay 50ms
    0x07, 0x02, 0x10, 0x17
])

class ILI9225(displayio.Display):
    def __init__(
        self,
        bus,
        width=176,
        height=220,
        colstart=0,
        rowstart=0
    ):
        super().__init__(
            display_bus=bus,
            init_sequence=_INIT_SEQUENCE,
            width=width,
            height=height,
            colstart=colstart,
            rowstart=rowstart,
            rotation=0,
            color_depth=16,
            grayscale=False,
            pixels_in_byte_share_row=False,
            data_as_commands=False,
            set_column_command=0x20,
            set_row_command=0x21,
            write_ram_command=0x22
        )
